import{a as me,b as w,c as ce}from"./chunk-LLOOYWH5.js";import{A as q,B as Q,C as W,D as x,E as X,F as Y,G as Z,L as ee,M as G,N as te,O as P,P as oe,Q as ie,R as ne,S as re,T as le,U as se,V as pe,W as ae,_ as A,c as J,d as T,da as de,e as K,f as v,g as N,h as L,i as h,j as _,k as C,l,m as f,n as g,o as a,p as r,q as n,r as b,s as S,t as u,u as d,v as p,w as $,x as c,y as O,z as U}from"./chunk-QBU5O5I5.js";var I=class i{constructor(t){this.http=t}apiUrl=`${me.apiUrl}/personas`;createPerson(t){return this.http.post(this.apiUrl,t)}getPeople(){return this.http.get(this.apiUrl)}getPeopleById(t){return this.http.get(`${this.apiUrl}/${t}`)}updatePerson(t,e){return this.http.put(`${this.apiUrl}/${t}`,e)}deletePerson(t){return this.http.delete(`${this.apiUrl}/${t}`)}static \u0275fac=function(e){return new(e||i)(K(Z))};static \u0275prov=J({token:i,factory:i.\u0275fac,providedIn:"root"})};var H=i=>({"border-red-500":i});function ve(i,t){i&1&&(r(0,"div",15),p(1," El nombre completo es obligatorio. "),n())}function he(i,t){i&1&&(r(0,"div",15),p(1," El email es obligatorio y debe ser v\xE1lido. "),n())}function _e(i,t){i&1&&(r(0,"div",15),p(1," El tel\xE9fono es obligatorio. "),n())}function Ce(i,t){if(i&1&&(r(0,"div",16),p(1),n()),i&2){let e=d();l(),c(" ",e.successMessage," ")}}function be(i,t){if(i&1&&(r(0,"div",17),p(1),n()),i&2){let e=d();l(),$(e.errorMessage)}}var V=class i{constructor(t,e,o){this.fb=t;this.peopleService=e;this.dialog=o}personAdded=new C;toEditPerson;toClearPerson=new C;formTitle="Agregar Persona";formButton="Agregar Persona";peopleForm;successMessage="";errorMessage="";ngOnInit(){this.loadForm()}ngOnChanges(t){t.toEditPerson&&this.loadForm()}loadForm(){this.toEditPerson?(this.formTitle="Editar Persona",this.formButton="Editar Persona",this.peopleForm=this.fb.group({nombrecompleto:[this.toEditPerson.nombrecompleto,P.required],email:[this.toEditPerson.email,[P.required,P.email]],telefono:[this.toEditPerson.telefono,P.required]})):(this.formTitle="Agregar Persona",this.formButton="Agregar Persona",this.peopleForm=this.fb.group({nombrecompleto:["",P.required],email:["",[P.required,P.email]],telefono:["",P.required]}))}onSubmit(){this.peopleForm.valid&&this.toEditPerson?this.dialog.open(w).afterClosed().subscribe(e=>{if(e&&this.toEditPerson?._id){let o=this.peopleForm.value;this.peopleService.updatePerson(this.toEditPerson._id,o).subscribe({next:s=>{this.successMessage="Persona editada satisfactoriamnete.",this.peopleForm.reset(),this.toClearPerson.emit(!0),setTimeout(()=>{this.successMessage=""},3e3)},error:s=>{this.errorMessage="Error al editar, intente m\xE1s tarde.",setTimeout(()=>{this.errorMessage=""},1e3)}})}else this.errorMessage="ninguna persona editada",this.peopleForm.reset(),setTimeout(()=>{this.errorMessage=""},1e3)}):this.dialog.open(w).afterClosed().subscribe(e=>{if(e){let o=this.peopleForm.value;this.peopleService.createPerson(o).subscribe({next:s=>{this.successMessage="Persona a\xF1adida satisfactoriamente.",this.personAdded.emit(o),this.peopleForm.reset(),setTimeout(()=>{this.successMessage=""},3e3)},error:s=>{this.errorMessage="Error mientras se a\xF1ade una persona.",setTimeout(()=>{this.errorMessage=""},1e3)}})}else this.errorMessage="ninguna persona a\xF1adida",this.peopleForm.reset(),setTimeout(()=>{this.errorMessage=""},1e3)})}static \u0275fac=function(e){return new(e||i)(f(se),f(I),f(A))};static \u0275cmp=v({type:i,selectors:[["app-people-form"]],inputs:{toEditPerson:"toEditPerson"},outputs:{personAdded:"personAdded",toClearPerson:"toClearPerson"},features:[L],decls:24,vars:18,consts:[[1,"max-w-lg","mx-auto","mt-8","bg-white","p-6","rounded","m-4"],[1,"text-2xl","font-bold","mb-6","text-center"],[3,"ngSubmit","formGroup"],[1,"mb-4"],["for","nombrecompleto",1,"block","text-gray-700"],["id","nombrecompleto","type","text","formControlName","nombrecompleto",1,"w-full","p-2","border","border-gray-300","rounded",3,"ngClass"],["class","text-red-500",4,"ngIf"],["for","email",1,"block","text-gray-700"],["id","email","type","email","formControlName","email",1,"w-full","p-2","border","border-gray-300","rounded",3,"ngClass"],["for","telefono",1,"block","text-gray-700"],["id","telefono","type","text","formControlName","telefono",1,"w-full","p-2","border","border-gray-300","rounded",3,"ngClass"],[1,"flex","justify-center"],["type","submit",1,"bg-blue-500","text-white","p-2","rounded","m-0.5","w-8/12","hover:bg-blue-600","transition",3,"disabled"],["class","text-green-500 mt-4",4,"ngIf"],["class","text-red-500 mt-4",4,"ngIf"],[1,"text-red-500"],[1,"text-green-500","mt-4"],[1,"text-red-500","mt-4"]],template:function(e,o){if(e&1&&(r(0,"div",0)(1,"h2",1),p(2),n(),r(3,"form",2),u("ngSubmit",function(){return o.onSubmit()}),r(4,"div",3)(5,"label",4),p(6,"Nombre Completo"),n(),b(7,"input",5),g(8,ve,2,0,"div",6),n(),r(9,"div",3)(10,"label",7),p(11,"Email"),n(),b(12,"input",8),g(13,he,2,0,"div",6),n(),r(14,"div",3)(15,"label",9),p(16,"Tel\xE9fono"),n(),b(17,"input",10),g(18,_e,2,0,"div",6),n(),r(19,"div",11)(20,"button",12),p(21),n()()(),g(22,Ce,2,1,"div",13)(23,be,2,1,"div",14),n()),e&2){let s,m,F,y,M,D;l(2),$(o.formTitle),l(),a("formGroup",o.peopleForm),l(4),a("ngClass",O(12,H,((s=o.peopleForm.get("nombrecompleto"))==null?null:s.invalid)&&((s=o.peopleForm.get("nombrecompleto"))==null?null:s.touched))),l(),a("ngIf",((m=o.peopleForm.get("nombrecompleto"))==null?null:m.invalid)&&((m=o.peopleForm.get("nombrecompleto"))==null?null:m.touched)),l(4),a("ngClass",O(14,H,((F=o.peopleForm.get("email"))==null?null:F.invalid)&&((F=o.peopleForm.get("email"))==null?null:F.touched))),l(),a("ngIf",((y=o.peopleForm.get("email"))==null?null:y.invalid)&&((y=o.peopleForm.get("email"))==null?null:y.touched)),l(4),a("ngClass",O(16,H,((M=o.peopleForm.get("telefono"))==null?null:M.invalid)&&((M=o.peopleForm.get("telefono"))==null?null:M.touched))),l(),a("ngIf",((D=o.peopleForm.get("telefono"))==null?null:D.invalid)&&((D=o.peopleForm.get("telefono"))==null?null:D.touched)),l(2),a("disabled",o.peopleForm.invalid),l(),c(" ",o.formButton," "),l(),a("ngIf",o.successMessage),l(),a("ngIf",o.errorMessage)}},dependencies:[Q,x,ne,te,oe,ie,re,le]})};var k=class i{selectedPerson=new C;person={_id:"",nombrecompleto:"",email:"",telefono:"",evento_actual:"",agenda_id:[],createdAt:new Date(0),updatedAt:new Date(0)};clickSelected(){this.selectedPerson.emit(this.person)}constructor(){}static \u0275fac=function(e){return new(e||i)};static \u0275cmp=v({type:i,selectors:[["app-people-card"]],inputs:{person:"person"},outputs:{selectedPerson:"selectedPerson"},decls:7,vars:3,consts:[[1,"bg-white","rounded-lg","shadow-md","p-6","hover:shadow-lg","transition-shadow","min-h-44",3,"click"],[1,"text-lg","font-semibold","text-gray-800","mb-2"],[1,"text-gray-600"]],template:function(e,o){e&1&&(r(0,"div",0),u("click",function(){return o.clickSelected()}),r(1,"h2",1),p(2),n(),r(3,"p",2),p(4),n(),r(5,"p",2),p(6),n()()),e&2&&(l(2),c(" ",o.person.nombrecompleto," "),l(2),c("Email: ",o.person.email,""),l(2),c("Tel\xE9fono: ",o.person.telefono,""))}})};function Ee(i,t){if(i&1){let e=S();r(0,"div",1)(1,"h2",2),p(2),n(),r(3,"p",3),p(4),n(),r(5,"p",3),p(6),n(),r(7,"p",4),p(8),U(9,"date"),n(),r(10,"p",5),p(11),U(12,"date"),n(),r(13,"div",6)(14,"button",7),u("click",function(){h(e);let s=d();return _(s.navigateToAgends())}),p(15," Ver agendas "),n(),r(16,"button",8),u("click",function(){h(e);let s=d();return _(s.toDeletePerson())}),b(17,"img",9),n(),r(18,"button",10),u("click",function(){h(e);let s=d();return _(s.toEditPerson())}),b(19,"img",11),n()()()}if(i&2){let e=d();l(2),c(" ",e.selectedPerson.nombrecompleto," "),l(2),c("Email: ",e.selectedPerson.email,""),l(2),c("Tel\xE9fono: ",e.selectedPerson.telefono,""),l(2),c(" Creado: ",q(9,5,e.selectedPerson.createdAt)," "),l(3),c(" Actualizado: ",q(12,7,e.selectedPerson.updatedAt)," ")}}var j=class i{constructor(t,e,o){this.dialog=t;this.router=e;this.sharedService=o}selectedPerson;deletePerson=new C;editPerson=new C;toDeletePerson(){this.dialog.open(w).afterClosed().subscribe(e=>{e?this.deletePerson.emit(this.selectedPerson):console.log("No se elimin\xF3 a ninguna persona")})}toEditPerson(){this.editPerson.emit(this.selectedPerson)}navigateToAgends(){this.sharedService.setData(this.selectedPerson),this.router.navigate(["/agends"])}static \u0275fac=function(e){return new(e||i)(f(A),f(ee),f(ce))};static \u0275cmp=v({type:i,selectors:[["app-people-details-card"]],inputs:{selectedPerson:"selectedPerson"},outputs:{deletePerson:"deletePerson",editPerson:"editPerson"},decls:1,vars:1,consts:[["class","bg-white rounded-lg shadow-md p-6 hover:shadow-lg transition-shadow min-h-52",4,"ngIf"],[1,"bg-white","rounded-lg","shadow-md","p-6","hover:shadow-lg","transition-shadow","min-h-52"],[1,"text-lg","font-semibold","text-gray-800","mb-2"],[1,"text-gray-600"],[1,"text-gray-400","text-xs","mt-2"],[1,"text-gray-400","text-xs"],[1,"flex","m-2"],[1,"bg-blue-500","text-white","p-2","rounded","m-0.5","w-8/12","hover:bg-blue-600","transition",3,"click"],[1,"bg-red-400","text-white","p-2","rounded","m-0.5","w-2/12","hover:bg-red-600","transition",3,"click"],["src","https://cdn-icons-png.flaticon.com/512/860/860829.png","alt","delete_icon",1,"h-8","w-8"],[1,"bg-green-600","text-white","p-2","rounded","m-0.5","w-35/120","hover:bg-green-700","transition",3,"click"],["src","https://icons.veryicon.com/png/o/miscellaneous/linear-small-icon/edit-246.png","alt","edit_icon",1,"h-8","w-8"]],template:function(e,o){e&1&&g(0,Ee,20,9,"div",0),e&2&&a("ngIf",o.selectedPerson)},dependencies:[x,X]})};function we(i,t){if(i&1){let e=S();r(0,"div")(1,"app-people-card",9),u("selectedPerson",function(s){h(e);let m=d();return _(m.onPersonSelected(s))}),n()()}if(i&2){let e=t.$implicit;l(),a("person",e)}}function Fe(i,t){if(i&1){let e=S();r(0,"div",10)(1,"app-people-details-card",11),u("deletePerson",function(s){h(e);let m=d();return _(m.onPersonDeleted(s))})("editPerson",function(s){h(e);let m=d();return _(m.onPersonEdited(s))}),n()()}if(i&2){let e=d();l(),a("selectedPerson",e.selectedPerson)}}var R=class i{constructor(t){this.peopleService=t}toEditPerson;selectedPerson;peopleForm;people_list=[];ngOnInit(){this.loadPeople()}loadPeople(){this.peopleService.getPeople().subscribe(t=>{this.people_list=t})}onPersonAdded(t){this.people_list.push(t)}onPersonDeleted(t){t&&t._id?this.peopleService.deletePerson(t._id).subscribe(()=>{console.log("Person successfully deleted "),this.loadPeople(),this.selectedPerson=void 0},e=>{console.error("Error while deleting person:",e)}):console.log("Invalid person to delete")}onPersonEdited(t){t&&(this.toEditPerson=t)}onPersonSelected(t){this.selectedPerson=t}onPersonClear(t){t&&(this.toEditPerson=void 0,this.selectedPerson=void 0,this.loadPeople())}static \u0275fac=function(e){return new(e||i)(f(I))};static \u0275cmp=v({type:i,selectors:[["app-people-page"]],decls:10,vars:3,consts:[[1,"min-h-screen","flex","flex-col","items-center","justify-between","bg-blue-500"],[1,"text-white","text-4xl","font-bold","mb-8"],[1,"flex-grow","flex","flex-col","items-center"],[1,"grid","grid-cols-1","sm:grid-cols-2","md:grid-cols-3","lg:grid-cols-4","gap-6","w-full","max-w-6xl","px-4","mb-8"],[4,"ngFor","ngForOf"],[1,"flex","mb-8","w-full"],[1,"w-1/2","justify-center"],[3,"toClearPerson","personAdded","toEditPerson"],["class","w-1/4 m-7",4,"ngIf"],[3,"selectedPerson","person"],[1,"w-1/4","m-7"],[3,"deletePerson","editPerson","selectedPerson"]],template:function(e,o){e&1&&(r(0,"div",0)(1,"h1",1),p(2,"Agenda Manager"),n(),r(3,"div",2)(4,"div",3),g(5,we,2,1,"div",4),n()(),r(6,"div",5)(7,"div",6)(8,"app-people-form",7),u("toClearPerson",function(m){return o.onPersonClear(m)})("personAdded",function(m){return o.onPersonAdded(m)}),n()(),g(9,Fe,2,1,"div",8),n()()),e&2&&(l(5),a("ngForOf",o.people_list),l(3),a("toEditPerson",o.toEditPerson),l(),a("ngIf",o.selectedPerson))},dependencies:[W,x,V,k,j]})};var ye=[{path:"",component:R}],B=class i{static \u0275fac=function(e){return new(e||i)};static \u0275mod=N({type:i});static \u0275inj=T({imports:[G.forChild(ye),G]})};var ge=class i{static \u0275fac=function(e){return new(e||i)};static \u0275mod=N({type:i});static \u0275inj=T({imports:[Y,B,ae,pe,de]})};export{ge as PeopleModuleModule};
