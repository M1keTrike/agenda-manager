"use strict";(self.webpackChunkagend_manager=self.webpackChunkagend_manager||[]).push([[487],{2487:(D,v,i)=>{i.r(v),i.d(v,{PeopleModuleModule:()=>B});var p=i(177),l=i(4341),f=i(517),e=i(3953),F=i(3130),C=i(1562);let _=(()=>{class o{http;apiUrl=`${F.c.apiUrl}/personas`;constructor(t){this.http=t}createPerson(t){return this.http.post(this.apiUrl,t)}getPeople(){return this.http.get(this.apiUrl)}getPeopleById(t){return this.http.get(`${this.apiUrl}/${t}`)}updatePerson(t,s){return this.http.put(`${this.apiUrl}/${t}`,s)}deletePerson(t){return this.http.delete(`${this.apiUrl}/${t}`)}static \u0275fac=function(s){return new(s||o)(e.KVO(C.Qq))};static \u0275prov=e.jDH({token:o,factory:o.\u0275fac,providedIn:"root"})}return o})();var h=i(3753),P=i(6591);const b=o=>({"border-red-500":o});function E(o,a){1&o&&(e.j41(0,"div",15),e.EFF(1," El nombre completo es obligatorio. "),e.k0s())}function k(o,a){1&o&&(e.j41(0,"div",15),e.EFF(1," El email es obligatorio y debe ser v\xe1lido. "),e.k0s())}function j(o,a){1&o&&(e.j41(0,"div",15),e.EFF(1," El tel\xe9fono es obligatorio. "),e.k0s())}function w(o,a){if(1&o&&(e.j41(0,"div",16),e.EFF(1),e.k0s()),2&o){const t=e.XpG();e.R7$(),e.SpI(" ",t.successMessage," ")}}function x(o,a){if(1&o&&(e.j41(0,"div",17),e.EFF(1),e.k0s()),2&o){const t=e.XpG();e.R7$(),e.JRh(t.errorMessage)}}let I=(()=>{class o{fb;peopleService;dialog;personAdded=new e.bkB;toEditPerson;toClearPerson=new e.bkB;formTitle="Agregar Persona";formButton="Agregar Persona";peopleForm;successMessage="";errorMessage="";constructor(t,s,n){this.fb=t,this.peopleService=s,this.dialog=n}ngOnInit(){this.loadForm()}ngOnChanges(t){t.toEditPerson&&this.loadForm()}loadForm(){this.toEditPerson?(this.formTitle="Editar Persona",this.formButton="Editar Persona",this.peopleForm=this.fb.group({nombrecompleto:[this.toEditPerson.nombrecompleto,l.k0.required],email:[this.toEditPerson.email,[l.k0.required,l.k0.email]],telefono:[this.toEditPerson.telefono,l.k0.required]})):(this.formTitle="Agregar Persona",this.formButton="Agregar Persona",this.peopleForm=this.fb.group({nombrecompleto:["",l.k0.required],email:["",[l.k0.required,l.k0.email]],telefono:["",l.k0.required]}))}onSubmit(){this.peopleForm.valid&&this.toEditPerson?this.dialog.open(h.w).afterClosed().subscribe(s=>{s&&this.toEditPerson?._id?this.peopleService.updatePerson(this.toEditPerson._id,this.peopleForm.value).subscribe({next:r=>{this.successMessage="Persona editada satisfactoriamnete.",this.peopleForm.reset(),this.toClearPerson.emit(!0),setTimeout(()=>{this.successMessage=""},3e3)},error:r=>{this.errorMessage="Error al editar, intente m\xe1s tarde.",setTimeout(()=>{this.errorMessage=""},1e3)}}):(this.errorMessage="ninguna persona editada",this.peopleForm.reset(),setTimeout(()=>{this.errorMessage=""},1e3))}):this.dialog.open(h.w).afterClosed().subscribe(s=>{if(s){const n=this.peopleForm.value;this.peopleService.createPerson(n).subscribe({next:r=>{this.successMessage="Persona a\xf1adida satisfactoriamente.",this.personAdded.emit(n),this.peopleForm.reset(),setTimeout(()=>{this.successMessage=""},3e3)},error:r=>{this.errorMessage="Error mientras se a\xf1ade una persona.",setTimeout(()=>{this.errorMessage=""},1e3)}})}else this.errorMessage="ninguna persona a\xf1adida",this.peopleForm.reset(),setTimeout(()=>{this.errorMessage=""},1e3)})}static \u0275fac=function(s){return new(s||o)(e.rXU(l.ok),e.rXU(_),e.rXU(P.bZ))};static \u0275cmp=e.VBU({type:o,selectors:[["app-people-form"]],inputs:{toEditPerson:"toEditPerson"},outputs:{personAdded:"personAdded",toClearPerson:"toClearPerson"},features:[e.OA$],decls:24,vars:18,consts:[[1,"max-w-lg","mx-auto","mt-8","bg-white","p-6","rounded","m-4"],[1,"text-2xl","font-bold","mb-6","text-center"],[3,"ngSubmit","formGroup"],[1,"mb-4"],["for","nombrecompleto",1,"block","text-gray-700"],["id","nombrecompleto","type","text","formControlName","nombrecompleto",1,"w-full","p-2","border","border-gray-300","rounded",3,"ngClass"],["class","text-red-500",4,"ngIf"],["for","email",1,"block","text-gray-700"],["id","email","type","email","formControlName","email",1,"w-full","p-2","border","border-gray-300","rounded",3,"ngClass"],["for","telefono",1,"block","text-gray-700"],["id","telefono","type","text","formControlName","telefono",1,"w-full","p-2","border","border-gray-300","rounded",3,"ngClass"],[1,"flex","justify-center"],["type","submit",1,"bg-blue-500","text-white","p-2","rounded","m-0.5","w-8/12","hover:bg-blue-600","transition",3,"disabled"],["class","text-green-500 mt-4",4,"ngIf"],["class","text-red-500 mt-4",4,"ngIf"],[1,"text-red-500"],[1,"text-green-500","mt-4"],[1,"text-red-500","mt-4"]],template:function(s,n){if(1&s&&(e.j41(0,"div",0)(1,"h2",1),e.EFF(2),e.k0s(),e.j41(3,"form",2),e.bIt("ngSubmit",function(){return n.onSubmit()}),e.j41(4,"div",3)(5,"label",4),e.EFF(6,"Nombre Completo"),e.k0s(),e.nrm(7,"input",5),e.DNE(8,E,2,0,"div",6),e.k0s(),e.j41(9,"div",3)(10,"label",7),e.EFF(11,"Email"),e.k0s(),e.nrm(12,"input",8),e.DNE(13,k,2,0,"div",6),e.k0s(),e.j41(14,"div",3)(15,"label",9),e.EFF(16,"Tel\xe9fono"),e.k0s(),e.nrm(17,"input",10),e.DNE(18,j,2,0,"div",6),e.k0s(),e.j41(19,"div",11)(20,"button",12),e.EFF(21),e.k0s()()(),e.DNE(22,w,2,1,"div",13)(23,x,2,1,"div",14),e.k0s()),2&s){let r,d,c,m,u,g;e.R7$(2),e.JRh(n.formTitle),e.R7$(),e.Y8G("formGroup",n.peopleForm),e.R7$(4),e.Y8G("ngClass",e.eq3(12,b,(null==(r=n.peopleForm.get("nombrecompleto"))?null:r.invalid)&&(null==(r=n.peopleForm.get("nombrecompleto"))?null:r.touched))),e.R7$(),e.Y8G("ngIf",(null==(d=n.peopleForm.get("nombrecompleto"))?null:d.invalid)&&(null==(d=n.peopleForm.get("nombrecompleto"))?null:d.touched)),e.R7$(4),e.Y8G("ngClass",e.eq3(14,b,(null==(c=n.peopleForm.get("email"))?null:c.invalid)&&(null==(c=n.peopleForm.get("email"))?null:c.touched))),e.R7$(),e.Y8G("ngIf",(null==(m=n.peopleForm.get("email"))?null:m.invalid)&&(null==(m=n.peopleForm.get("email"))?null:m.touched)),e.R7$(4),e.Y8G("ngClass",e.eq3(16,b,(null==(u=n.peopleForm.get("telefono"))?null:u.invalid)&&(null==(u=n.peopleForm.get("telefono"))?null:u.touched))),e.R7$(),e.Y8G("ngIf",(null==(g=n.peopleForm.get("telefono"))?null:g.invalid)&&(null==(g=n.peopleForm.get("telefono"))?null:g.touched)),e.R7$(2),e.Y8G("disabled",n.peopleForm.invalid),e.R7$(),e.SpI(" ",n.formButton," "),e.R7$(),e.Y8G("ngIf",n.successMessage),e.R7$(),e.Y8G("ngIf",n.errorMessage)}},dependencies:[p.YU,p.bT,l.qT,l.me,l.BC,l.cb,l.j4,l.JD]})}return o})(),T=(()=>{class o{selectedPerson=new e.bkB;person={_id:"",nombrecompleto:"",email:"",telefono:"",evento_actual:"",agenda_id:[],createdAt:new Date(0),updatedAt:new Date(0)};clickSelected(){this.selectedPerson.emit(this.person)}constructor(){}static \u0275fac=function(s){return new(s||o)};static \u0275cmp=e.VBU({type:o,selectors:[["app-people-card"]],inputs:{person:"person"},outputs:{selectedPerson:"selectedPerson"},decls:7,vars:3,consts:[[1,"bg-white","rounded-lg","shadow-md","p-6","hover:shadow-lg","transition-shadow","min-h-44",3,"click"],[1,"text-lg","font-semibold","text-gray-800","mb-2"],[1,"text-gray-600"]],template:function(s,n){1&s&&(e.j41(0,"div",0),e.bIt("click",function(){return n.clickSelected()}),e.j41(1,"h2",1),e.EFF(2),e.k0s(),e.j41(3,"p",2),e.EFF(4),e.k0s(),e.j41(5,"p",2),e.EFF(6),e.k0s()()),2&s&&(e.R7$(2),e.SpI(" ",n.person.nombrecompleto," "),e.R7$(2),e.SpI("Email: ",n.person.email,""),e.R7$(2),e.SpI("Tel\xe9fono: ",n.person.telefono,""))}})}return o})();var R=i(963);function $(o,a){if(1&o){const t=e.RV6();e.j41(0,"div",1)(1,"h2",2),e.EFF(2),e.k0s(),e.j41(3,"p",3),e.EFF(4),e.k0s(),e.j41(5,"p",3),e.EFF(6),e.k0s(),e.j41(7,"p",4),e.EFF(8),e.nI1(9,"date"),e.k0s(),e.j41(10,"p",5),e.EFF(11),e.nI1(12,"date"),e.k0s(),e.j41(13,"div",6)(14,"button",7),e.bIt("click",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.navigateToAgends())}),e.EFF(15," Ver agendas "),e.k0s(),e.j41(16,"button",8),e.bIt("click",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.toDeletePerson())}),e.nrm(17,"img",9),e.k0s(),e.j41(18,"button",10),e.bIt("click",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.toEditPerson())}),e.nrm(19,"img",11),e.k0s()()()}if(2&o){const t=e.XpG();e.R7$(2),e.SpI(" ",t.selectedPerson.nombrecompleto," "),e.R7$(2),e.SpI("Email: ",t.selectedPerson.email,""),e.R7$(2),e.SpI("Tel\xe9fono: ",t.selectedPerson.telefono,""),e.R7$(2),e.SpI(" Creado: ",e.bMT(9,5,t.selectedPerson.createdAt)," "),e.R7$(3),e.SpI(" Actualizado: ",e.bMT(12,7,t.selectedPerson.updatedAt)," ")}}let y=(()=>{class o{dialog;router;sharedService;selectedPerson;deletePerson=new e.bkB;editPerson=new e.bkB;constructor(t,s,n){this.dialog=t,this.router=s,this.sharedService=n}toDeletePerson(){this.dialog.open(h.w).afterClosed().subscribe(s=>{s?this.deletePerson.emit(this.selectedPerson):console.log("No se elimin\xf3 a ninguna persona")})}toEditPerson(){this.editPerson.emit(this.selectedPerson)}navigateToAgends(){this.sharedService.setData(this.selectedPerson),this.router.navigate(["/agends"])}static \u0275fac=function(s){return new(s||o)(e.rXU(P.bZ),e.rXU(f.Ix),e.rXU(R.d))};static \u0275cmp=e.VBU({type:o,selectors:[["app-people-details-card"]],inputs:{selectedPerson:"selectedPerson"},outputs:{deletePerson:"deletePerson",editPerson:"editPerson"},decls:1,vars:1,consts:[["class","bg-white rounded-lg shadow-md p-6 hover:shadow-lg transition-shadow min-h-52",4,"ngIf"],[1,"bg-white","rounded-lg","shadow-md","p-6","hover:shadow-lg","transition-shadow","min-h-52"],[1,"text-lg","font-semibold","text-gray-800","mb-2"],[1,"text-gray-600"],[1,"text-gray-400","text-xs","mt-2"],[1,"text-gray-400","text-xs"],[1,"flex","m-2"],[1,"bg-blue-500","text-white","p-2","rounded","m-0.5","w-8/12","hover:bg-blue-600","transition",3,"click"],[1,"bg-red-400","text-white","p-2","rounded","m-0.5","w-2/12","hover:bg-red-600","transition",3,"click"],["src","https://cdn-icons-png.flaticon.com/512/860/860829.png","alt","delete_icon",1,"h-8","w-8"],[1,"bg-green-600","text-white","p-2","rounded","m-0.5","w-35/120","hover:bg-green-700","transition",3,"click"],["src","https://icons.veryicon.com/png/o/miscellaneous/linear-small-icon/edit-246.png","alt","edit_icon",1,"h-8","w-8"]],template:function(s,n){1&s&&e.DNE(0,$,20,9,"div",0),2&s&&e.Y8G("ngIf",n.selectedPerson)},dependencies:[p.bT,p.vh]})}return o})();function S(o,a){if(1&o){const t=e.RV6();e.j41(0,"div")(1,"app-people-card",9),e.bIt("selectedPerson",function(n){e.eBV(t);const r=e.XpG();return e.Njj(r.onPersonSelected(n))}),e.k0s()()}if(2&o){const t=a.$implicit;e.R7$(),e.Y8G("person",t)}}function G(o,a){if(1&o){const t=e.RV6();e.j41(0,"div",10)(1,"app-people-details-card",11),e.bIt("deletePerson",function(n){e.eBV(t);const r=e.XpG();return e.Njj(r.onPersonDeleted(n))})("editPerson",function(n){e.eBV(t);const r=e.XpG();return e.Njj(r.onPersonEdited(n))}),e.k0s()()}if(2&o){const t=e.XpG();e.R7$(),e.Y8G("selectedPerson",t.selectedPerson)}}const M=[{path:"",component:(()=>{class o{peopleService;toEditPerson;selectedPerson;peopleForm;constructor(t){this.peopleService=t}people_list=[];ngOnInit(){this.loadPeople()}loadPeople(){this.peopleService.getPeople().subscribe(t=>{this.people_list=t})}onPersonAdded(t){this.people_list.push(t)}onPersonDeleted(t){t&&t._id?this.peopleService.deletePerson(t._id).subscribe(()=>{console.log("Person successfully deleted "),this.loadPeople(),this.selectedPerson=void 0},s=>{console.error("Error while deleting person:",s)}):console.log("Invalid person to delete")}onPersonEdited(t){t&&(this.toEditPerson=t)}onPersonSelected(t){this.selectedPerson=t}onPersonClear(t){t&&(this.toEditPerson=void 0,this.selectedPerson=void 0,this.loadPeople())}static \u0275fac=function(s){return new(s||o)(e.rXU(_))};static \u0275cmp=e.VBU({type:o,selectors:[["app-people-page"]],decls:10,vars:3,consts:[[1,"min-h-screen","flex","flex-col","items-center","justify-between","bg-blue-500"],[1,"text-white","text-4xl","font-bold","mb-8"],[1,"flex-grow","flex","flex-col","items-center"],[1,"grid","grid-cols-1","sm:grid-cols-2","md:grid-cols-3","lg:grid-cols-4","gap-6","w-full","max-w-6xl","px-4","mb-8"],[4,"ngFor","ngForOf"],[1,"flex","mb-8","w-full"],[1,"w-1/2","justify-center"],[3,"toClearPerson","personAdded","toEditPerson"],["class","w-1/4 m-7",4,"ngIf"],[3,"selectedPerson","person"],[1,"w-1/4","m-7"],[3,"deletePerson","editPerson","selectedPerson"]],template:function(s,n){1&s&&(e.j41(0,"div",0)(1,"h1",1),e.EFF(2,"Agenda Manager"),e.k0s(),e.j41(3,"div",2)(4,"div",3),e.DNE(5,S,2,1,"div",4),e.k0s()(),e.j41(6,"div",5)(7,"div",6)(8,"app-people-form",7),e.bIt("toClearPerson",function(d){return n.onPersonClear(d)})("personAdded",function(d){return n.onPersonAdded(d)}),e.k0s()(),e.DNE(9,G,2,1,"div",8),e.k0s()()),2&s&&(e.R7$(5),e.Y8G("ngForOf",n.people_list),e.R7$(3),e.Y8G("toEditPerson",n.toEditPerson),e.R7$(),e.Y8G("ngIf",n.selectedPerson))},dependencies:[p.Sq,p.bT,I,T,y]})}return o})()}];let A=(()=>{class o{static \u0275fac=function(s){return new(s||o)};static \u0275mod=e.$C({type:o});static \u0275inj=e.G2t({imports:[f.iI.forChild(M),f.iI]})}return o})(),B=(()=>{class o{static \u0275fac=function(s){return new(s||o)};static \u0275mod=e.$C({type:o});static \u0275inj=e.G2t({imports:[p.MD,A,l.X1,l.YN,P.hM]})}return o})()}}]);